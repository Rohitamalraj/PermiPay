{
  "_format": "hh-sol-artifact-1",
  "contractName": "PermiPayBilling",
  "sourceName": "contracts/PermiPayBilling_ERC7715.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_usdc",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_treasury",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "sessionAccount",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "spendingLimit",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "expiresAt",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "PermissionGranted",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "sessionAccount",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "PermissionRevoked",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "newSpendingLimit",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "newExpiresAt",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "PermissionUpdated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "sessionAccount",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "uint8",
          "name": "serviceType",
          "type": "uint8"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "cost",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "remainingBudget",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "ServiceExecuted",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "USDC",
      "outputs": [
        {
          "internalType": "contract IERC20",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "authorizedSessions",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "sessionAccount",
          "type": "address"
        },
        {
          "internalType": "enum PermiPayBilling.ServiceType",
          "name": "serviceType",
          "type": "uint8"
        }
      ],
      "name": "canExecuteService",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "internalType": "enum PermiPayBilling.ServiceType",
          "name": "serviceType",
          "type": "uint8"
        }
      ],
      "name": "executeService",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "getPermission",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "spendingLimit",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "spentAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "expiresAt",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "isActive",
          "type": "bool"
        },
        {
          "internalType": "address",
          "name": "sessionAccount",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "sessionAccount",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "spendingLimit",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "durationSeconds",
          "type": "uint256"
        }
      ],
      "name": "grantPermission",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "revokePermission",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "enum PermiPayBilling.ServiceType",
          "name": "",
          "type": "uint8"
        }
      ],
      "name": "servicePrices",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "transferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "treasury",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "enum PermiPayBilling.ServiceType",
          "name": "serviceType",
          "type": "uint8"
        },
        {
          "internalType": "uint256",
          "name": "newPrice",
          "type": "uint256"
        }
      ],
      "name": "updateServicePrice",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "userPermissions",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "spendingLimit",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "spentAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "expiresAt",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "isActive",
          "type": "bool"
        },
        {
          "internalType": "address",
          "name": "sessionAccount",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "bytecode": "0x60c060405234801561001057600080fd5b50604051610f91380380610f9183398101604081905261002f916100ef565b6001600160a01b039182166080521660a052600080546001600160a01b031916331781556001602052620493e07fa6eef7e35abe7026729641147f7915573c7e97b47efa546f5f6e3230263bcb495562061a807fcc69885fda6bcc1a4ace058b4a62bf5e179ea78fd58a1ccd71c22cc9b688792f55600290526207a1207fd9d16d34ffb15ba3a3d852f0d403e2ce1d691fb54de27ac87cd2f993f3ec330f55610122565b80516001600160a01b03811681146100ea57600080fd5b919050565b6000806040838503121561010257600080fd5b61010b836100d3565b9150610119602084016100d3565b90509250929050565b60805160a051610e3c610155600039600081816101670152610a6101526000818161029c0152610a930152610e3c6000f3fe608060405234801561001057600080fd5b50600436106100cf5760003560e01c806385fb94221161008c5780639afd21de116100665780639afd21de146102d1578063b426cbeb146102e4578063f2fde38b146102f7578063fb19db831461030a57600080fd5b806385fb94221461024d57806389a30271146102975780638da5cb5b146102be57600080fd5b8063017e1ab8146100d45780634debb5a8146101175780635363ae9b146101215780635ee2429b1461014f57806361d027b31461016257806383c1cd8a146101a1575b600080fd5b6101026100e2366004610c50565b600360209081526000928352604080842090915290825290205460ff1681565b60405190151581526020015b60405180910390f35b61011f61031d565b005b61014161012f366004610c92565b60016020526000908152604090205481565b60405190815260200161010e565b61011f61015d366004610cad565b610403565b6101897f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b03909116815260200161010e565b61021a6101af366004610ce0565b6001600160a01b03908116600090815260026020818152604092839020835160a081018552815480825260018301549382018490529382015494810185905260039091015460ff81161515606083018190526101009091049095166080909101819052919490939190565b60408051958652602086019490945292840191909152151560608301526001600160a01b0316608082015260a00161010e565b61021a61025b366004610ce0565b600260208190526000918252604090912080546001820154928201546003909201549092919060ff81169061010090046001600160a01b031685565b6101897f000000000000000000000000000000000000000000000000000000000000000081565b600054610189906001600160a01b031681565b6101026102df366004610cfb565b6105e5565b61011f6102f2366004610d3e565b61070c565b61011f610305366004610ce0565b610790565b610102610318366004610d68565b610841565b336000908152600260205260409020600381015460ff1661037d5760405162461bcd60e51b81526020600482015260156024820152745065726d697373696f6e206e6f742061637469766560581b60448201526064015b60405180910390fd5b6003808201805460ff1990811680835533600081815260209586526040808220610100948590046001600160a01b0390811684529752908190208054909416909355925491519104909216917fddc354b2e01a1c04d0ff3f0a82abd6226f186a7e8d03cea079c60c6cd9600189906103f89042815260200190565b60405180910390a350565b6001600160a01b0383166104595760405162461bcd60e51b815260206004820152601760248201527f496e76616c69642073657373696f6e206163636f756e740000000000000000006044820152606401610374565b600082116104a25760405162461bcd60e51b8152602060048201526016602482015275125b9d985b1a59081cdc195b991a5b99c81b1a5b5a5d60521b6044820152606401610374565b600081116104e55760405162461bcd60e51b815260206004820152601060248201526f24b73b30b634b210323ab930ba34b7b760811b6044820152606401610374565b60006104f18242610da8565b6040805160a08101825285815260006020808301828152838501868152600160608087018281526001600160a01b038e811660808a0181815233808b526002808b528d8c209c518d5598518c8801559651978b019790975591516003998a01805497516001600160a81b0319909816911515610100600160a81b03191691909117610100979092169690960217909455958452868520838652845293869020805460ff19169094179093558451898152918201869052429482019490945293945091927fbc6ae1517c84ba3d8bc9a06f909ea29d8898c1b2ee9a06bd2cc39967dcbfb03c910160405180910390a350505050565b6001600160a01b038084166000908152600260208181526040808420815160a08101835281548152600182015493810193909352928301549082015260039091015460ff811615156060830181905261010090910490931660808201529091610652576000915050610705565b42816040015111610667576000915050610705565b6001600160a01b0380861660009081526003602090815260408083209388168352929052205460ff1661069e576000915050610705565b6000600160008560028111156106b6576106b6610dbb565b60028111156106c7576106c7610dbb565b815260200190815260200160002054905081600001518183602001516106ed9190610da8565b11156106fe57600092505050610705565b6001925050505b9392505050565b6000546001600160a01b031633146107535760405162461bcd60e51b815260206004820152600a60248201526927b7363c9037bbb732b960b11b6044820152606401610374565b806001600084600281111561076a5761076a610dbb565b600281111561077b5761077b610dbb565b81526020810191909152604001600020555050565b6000546001600160a01b031633146107d75760405162461bcd60e51b815260206004820152600a60248201526927b7363c9037bbb732b960b11b6044820152606401610374565b6001600160a01b03811661081f5760405162461bcd60e51b815260206004820152600f60248201526e496e76616c6964206164647265737360881b6044820152606401610374565b600080546001600160a01b0319166001600160a01b0392909216919091179055565b6001600160a01b0382166000908152600260205260408120600381015460ff166108a55760405162461bcd60e51b81526020600482015260156024820152745065726d697373696f6e206e6f742061637469766560581b6044820152606401610374565b428160020154116108ed5760405162461bcd60e51b815260206004820152601260248201527114195c9b5a5cdcda5bdb88195e1c1a5c995960721b6044820152606401610374565b6001600160a01b038416600090815260036020908152604080832033845290915290205460ff166109595760405162461bcd60e51b815260206004820152601660248201527514d95cdcda5bdb881b9bdd08185d5d1a1bdc9a5e995960521b6044820152606401610374565b60006001600085600281111561097157610971610dbb565b600281111561098257610982610dbb565b8152602001908152602001600020549050600081116109d55760405162461bcd60e51b815260206004820152600f60248201526e496e76616c6964207365727669636560881b6044820152606401610374565b60008183600101546109e79190610da8565b8354909150811115610a3b5760405162461bcd60e51b815260206004820152601760248201527f5370656e64696e67206c696d69742065786365656465640000000000000000006044820152606401610374565b600183018190556040516323b872dd60e01b81526001600160a01b0387811660048301527f000000000000000000000000000000000000000000000000000000000000000081166024830152604482018490526000917f0000000000000000000000000000000000000000000000000000000000000000909116906323b872dd906064016020604051808303816000875af1158015610ade573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b029190610dd1565b905080610b485760405162461bcd60e51b81526020600482015260146024820152731554d110c81d1c985b9cd9995c8819985a5b195960621b6044820152606401610374565b8354600090610b58908490610df3565b9050866002811115610b6c57610b6c610dbb565b60ff16336001600160a01b0316896001600160a01b03167f06026d0e43a8d5a82bba8851052b03a4fa95e225e0bd1b433648df946617759e878542604051610bc7939291909283526020830191909152604082015260600190565b60405180910390a480600003610c245760038501805460ff1916905560405142815233906001600160a01b038a16907fddc354b2e01a1c04d0ff3f0a82abd6226f186a7e8d03cea079c60c6cd96001899060200160405180910390a35b6001955050505050505b92915050565b80356001600160a01b0381168114610c4b57600080fd5b919050565b60008060408385031215610c6357600080fd5b610c6c83610c34565b9150610c7a60208401610c34565b90509250929050565b803560038110610c4b57600080fd5b600060208284031215610ca457600080fd5b61070582610c83565b600080600060608486031215610cc257600080fd5b610ccb84610c34565b95602085013595506040909401359392505050565b600060208284031215610cf257600080fd5b61070582610c34565b600080600060608486031215610d1057600080fd5b610d1984610c34565b9250610d2760208501610c34565b9150610d3560408501610c83565b90509250925092565b60008060408385031215610d5157600080fd5b610d5a83610c83565b946020939093013593505050565b60008060408385031215610d7b57600080fd5b610d8483610c34565b9150610c7a60208401610c83565b634e487b7160e01b600052601160045260246000fd5b80820180821115610c2e57610c2e610d92565b634e487b7160e01b600052602160045260246000fd5b600060208284031215610de357600080fd5b8151801515811461070557600080fd5b81810381811115610c2e57610c2e610d9256fea264697066735822122072c686ddabce63dc0ae8badfea6880c686f56f101ec2941f5fd58d7e1000b84f64736f6c63430008170033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100cf5760003560e01c806385fb94221161008c5780639afd21de116100665780639afd21de146102d1578063b426cbeb146102e4578063f2fde38b146102f7578063fb19db831461030a57600080fd5b806385fb94221461024d57806389a30271146102975780638da5cb5b146102be57600080fd5b8063017e1ab8146100d45780634debb5a8146101175780635363ae9b146101215780635ee2429b1461014f57806361d027b31461016257806383c1cd8a146101a1575b600080fd5b6101026100e2366004610c50565b600360209081526000928352604080842090915290825290205460ff1681565b60405190151581526020015b60405180910390f35b61011f61031d565b005b61014161012f366004610c92565b60016020526000908152604090205481565b60405190815260200161010e565b61011f61015d366004610cad565b610403565b6101897f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b03909116815260200161010e565b61021a6101af366004610ce0565b6001600160a01b03908116600090815260026020818152604092839020835160a081018552815480825260018301549382018490529382015494810185905260039091015460ff81161515606083018190526101009091049095166080909101819052919490939190565b60408051958652602086019490945292840191909152151560608301526001600160a01b0316608082015260a00161010e565b61021a61025b366004610ce0565b600260208190526000918252604090912080546001820154928201546003909201549092919060ff81169061010090046001600160a01b031685565b6101897f000000000000000000000000000000000000000000000000000000000000000081565b600054610189906001600160a01b031681565b6101026102df366004610cfb565b6105e5565b61011f6102f2366004610d3e565b61070c565b61011f610305366004610ce0565b610790565b610102610318366004610d68565b610841565b336000908152600260205260409020600381015460ff1661037d5760405162461bcd60e51b81526020600482015260156024820152745065726d697373696f6e206e6f742061637469766560581b60448201526064015b60405180910390fd5b6003808201805460ff1990811680835533600081815260209586526040808220610100948590046001600160a01b0390811684529752908190208054909416909355925491519104909216917fddc354b2e01a1c04d0ff3f0a82abd6226f186a7e8d03cea079c60c6cd9600189906103f89042815260200190565b60405180910390a350565b6001600160a01b0383166104595760405162461bcd60e51b815260206004820152601760248201527f496e76616c69642073657373696f6e206163636f756e740000000000000000006044820152606401610374565b600082116104a25760405162461bcd60e51b8152602060048201526016602482015275125b9d985b1a59081cdc195b991a5b99c81b1a5b5a5d60521b6044820152606401610374565b600081116104e55760405162461bcd60e51b815260206004820152601060248201526f24b73b30b634b210323ab930ba34b7b760811b6044820152606401610374565b60006104f18242610da8565b6040805160a08101825285815260006020808301828152838501868152600160608087018281526001600160a01b038e811660808a0181815233808b526002808b528d8c209c518d5598518c8801559651978b019790975591516003998a01805497516001600160a81b0319909816911515610100600160a81b03191691909117610100979092169690960217909455958452868520838652845293869020805460ff19169094179093558451898152918201869052429482019490945293945091927fbc6ae1517c84ba3d8bc9a06f909ea29d8898c1b2ee9a06bd2cc39967dcbfb03c910160405180910390a350505050565b6001600160a01b038084166000908152600260208181526040808420815160a08101835281548152600182015493810193909352928301549082015260039091015460ff811615156060830181905261010090910490931660808201529091610652576000915050610705565b42816040015111610667576000915050610705565b6001600160a01b0380861660009081526003602090815260408083209388168352929052205460ff1661069e576000915050610705565b6000600160008560028111156106b6576106b6610dbb565b60028111156106c7576106c7610dbb565b815260200190815260200160002054905081600001518183602001516106ed9190610da8565b11156106fe57600092505050610705565b6001925050505b9392505050565b6000546001600160a01b031633146107535760405162461bcd60e51b815260206004820152600a60248201526927b7363c9037bbb732b960b11b6044820152606401610374565b806001600084600281111561076a5761076a610dbb565b600281111561077b5761077b610dbb565b81526020810191909152604001600020555050565b6000546001600160a01b031633146107d75760405162461bcd60e51b815260206004820152600a60248201526927b7363c9037bbb732b960b11b6044820152606401610374565b6001600160a01b03811661081f5760405162461bcd60e51b815260206004820152600f60248201526e496e76616c6964206164647265737360881b6044820152606401610374565b600080546001600160a01b0319166001600160a01b0392909216919091179055565b6001600160a01b0382166000908152600260205260408120600381015460ff166108a55760405162461bcd60e51b81526020600482015260156024820152745065726d697373696f6e206e6f742061637469766560581b6044820152606401610374565b428160020154116108ed5760405162461bcd60e51b815260206004820152601260248201527114195c9b5a5cdcda5bdb88195e1c1a5c995960721b6044820152606401610374565b6001600160a01b038416600090815260036020908152604080832033845290915290205460ff166109595760405162461bcd60e51b815260206004820152601660248201527514d95cdcda5bdb881b9bdd08185d5d1a1bdc9a5e995960521b6044820152606401610374565b60006001600085600281111561097157610971610dbb565b600281111561098257610982610dbb565b8152602001908152602001600020549050600081116109d55760405162461bcd60e51b815260206004820152600f60248201526e496e76616c6964207365727669636560881b6044820152606401610374565b60008183600101546109e79190610da8565b8354909150811115610a3b5760405162461bcd60e51b815260206004820152601760248201527f5370656e64696e67206c696d69742065786365656465640000000000000000006044820152606401610374565b600183018190556040516323b872dd60e01b81526001600160a01b0387811660048301527f000000000000000000000000000000000000000000000000000000000000000081166024830152604482018490526000917f0000000000000000000000000000000000000000000000000000000000000000909116906323b872dd906064016020604051808303816000875af1158015610ade573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b029190610dd1565b905080610b485760405162461bcd60e51b81526020600482015260146024820152731554d110c81d1c985b9cd9995c8819985a5b195960621b6044820152606401610374565b8354600090610b58908490610df3565b9050866002811115610b6c57610b6c610dbb565b60ff16336001600160a01b0316896001600160a01b03167f06026d0e43a8d5a82bba8851052b03a4fa95e225e0bd1b433648df946617759e878542604051610bc7939291909283526020830191909152604082015260600190565b60405180910390a480600003610c245760038501805460ff1916905560405142815233906001600160a01b038a16907fddc354b2e01a1c04d0ff3f0a82abd6226f186a7e8d03cea079c60c6cd96001899060200160405180910390a35b6001955050505050505b92915050565b80356001600160a01b0381168114610c4b57600080fd5b919050565b60008060408385031215610c6357600080fd5b610c6c83610c34565b9150610c7a60208401610c34565b90509250929050565b803560038110610c4b57600080fd5b600060208284031215610ca457600080fd5b61070582610c83565b600080600060608486031215610cc257600080fd5b610ccb84610c34565b95602085013595506040909401359392505050565b600060208284031215610cf257600080fd5b61070582610c34565b600080600060608486031215610d1057600080fd5b610d1984610c34565b9250610d2760208501610c34565b9150610d3560408501610c83565b90509250925092565b60008060408385031215610d5157600080fd5b610d5a83610c83565b946020939093013593505050565b60008060408385031215610d7b57600080fd5b610d8483610c34565b9150610c7a60208401610c83565b634e487b7160e01b600052601160045260246000fd5b80820180821115610c2e57610c2e610d92565b634e487b7160e01b600052602160045260246000fd5b600060208284031215610de357600080fd5b8151801515811461070557600080fd5b81810381811115610c2e57610c2e610d9256fea264697066735822122072c686ddabce63dc0ae8badfea6880c686f56f101ec2941f5fd58d7e1000b84f64736f6c63430008170033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
