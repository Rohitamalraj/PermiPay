{
  "_format": "hh-sol-artifact-1",
  "contractName": "PermiPayBilling",
  "sourceName": "contracts/PermiPayBilling.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_usdc",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_treasury",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "spendingLimit",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "expiresAt",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "PermissionGranted",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "PermissionRevoked",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "enum PermiPayBilling.ServiceType",
          "name": "serviceType",
          "type": "uint8"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "cost",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "remainingBudget",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "ServiceExecuted",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "USDC",
      "outputs": [
        {
          "internalType": "contract IERC20",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "internalType": "enum PermiPayBilling.ServiceType",
          "name": "serviceType",
          "type": "uint8"
        }
      ],
      "name": "canExecuteService",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "internalType": "enum PermiPayBilling.ServiceType",
          "name": "serviceType",
          "type": "uint8"
        }
      ],
      "name": "executeService",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "getPermissionStatus",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "spendingLimit",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "spentAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "remainingBudget",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "expiresAt",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "isActive",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "spendingLimit",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "duration",
          "type": "uint256"
        }
      ],
      "name": "grantPermission",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "revokePermission",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "enum PermiPayBilling.ServiceType",
          "name": "",
          "type": "uint8"
        }
      ],
      "name": "servicePrices",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "treasury",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "userPermissions",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "spendingLimit",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "spentAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "expiresAt",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "isActive",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "bytecode": "0x60c060405234801561001057600080fd5b50604051610bfc380380610bfc83398101604081905261002f916100df565b6001600160a01b039182166080521660a05260006020819052620493e07fad3228b676f7d3cd4284a5443f17f1962b36e491b30a40b2405849e597ba5fb55562061a807fada5013122d395ba3c54772283fb069b10426056ef8ca54750cb9bb552a59e7d55600290526207a1207fabbb5caa7dda850e60932de0934eb1f9d0f59695050f761dc64e443e5030a56955610112565b80516001600160a01b03811681146100da57600080fd5b919050565b600080604083850312156100f257600080fd5b6100fb836100c3565b9150610109602084016100c3565b90509250929050565b60805160a051610ab061014c6000396000818161011701526107ba0152600081816101b10152818161041301526107e90152610ab06000f3fe608060405234801561001057600080fd5b50600436106100935760003560e01c806385fb94221161006657806385fb94221461015157806389a30271146101ac5780639e2a7bc1146101d3578063d0a605ad146101e6578063fb19db831461020957600080fd5b806343213837146100985780634debb5a8146100da5780635363ae9b146100e457806361d027b314610112575b600080fd5b6100ab6100a636600461094c565b61021c565b6040805195865260208601949094529284019190915260608301521515608082015260a0015b60405180910390f35b6100e26102a8565b005b6101046100f236600461097d565b60006020819052908152604090205481565b6040519081526020016100d1565b6101397f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b0390911681526020016100d1565b61018a61015f36600461094c565b6001602081905260009182526040909120805491810154600282015460039092015490919060ff1684565b60408051948552602085019390935291830152151560608201526080016100d1565b6101397f000000000000000000000000000000000000000000000000000000000000000081565b6100e26101e1366004610998565b61035c565b6101f96101f43660046109ba565b610591565b60405190151581526020016100d1565b6101f96102173660046109ba565b610654565b6001600160a01b038116600090815260016020818152604080842081516080810183528154808252948201549381018490526002820154928101929092526003015460ff16151560608201528392839283928392909161027c8183610a03565b8360400151846060015180156102955750846040015142105b939b929a50909850965090945092505050565b3360009081526001602052604090206003015460ff166103065760405162461bcd60e51b815260206004820152601460248201527327379030b1ba34bb32903832b936b4b9b9b4b7b760611b60448201526064015b60405180910390fd5b3360008181526001602052604090819020600301805460ff19169055517fbd20e616115b933d187c2929d56282e841784672f376eeb58eb7a4f6da3aa524906103529042815260200190565b60405180910390a2565b600082116103ac5760405162461bcd60e51b815260206004820152601f60248201527f5370656e64696e67206c696d6974206d75737420626520706f7369746976650060448201526064016102fd565b600081116103fc5760405162461bcd60e51b815260206004820152601960248201527f4475726174696f6e206d75737420626520706f7369746976650000000000000060448201526064016102fd565b6040516370a0823160e01b815233600482015282907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906370a0823190602401602060405180830381865afa158015610462573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104869190610a16565b10156104d45760405162461bcd60e51b815260206004820152601960248201527f496e73756666696369656e7420555344432062616c616e63650000000000000060448201526064016102fd565b60408051608081018252838152600060208201529081016104f58342610a2f565b8152600160209182018190523360008181528284526040908190208551815593850151928401929092559083015160028301556060909201516003909101805460ff19169115159190911790557f96587ab88ed3ebff489cfa48cc780eaa8e16b96c7f1511fda778c7470eb792468361056e8442610a2f565b604080519283526020830191909152429082015260600160405180910390a25050565b6001600160a01b038216600090815260016020818152604080842081516080810183528154815293810154928401929092526002820154908301526003015460ff161580156060830152806105ea575080604001514210155b156105f957600091505061064e565b600080600085600281111561061057610610610a42565b600281111561062157610621610a42565b815260200190815260200160002054905081600001518183602001516106479190610a2f565b1115925050505b92915050565b6001600160a01b0382166000908152600160205260408120600381015460ff166106b75760405162461bcd60e51b815260206004820152601460248201527327379030b1ba34bb32903832b936b4b9b9b4b7b760611b60448201526064016102fd565b806002015442106106ff5760405162461bcd60e51b815260206004820152601260248201527114195c9b5a5cdcda5bdb88195e1c1a5c995960721b60448201526064016102fd565b600080600085600281111561071657610716610a42565b600281111561072757610727610a42565b8152602001908152602001600020549050816000015481836001015461074d9190610a2f565b111561079b5760405162461bcd60e51b815260206004820152601e60248201527f496e73756666696369656e74207065726d697373696f6e20627564676574000060448201526064016102fd565b6040516323b872dd60e01b81526001600160a01b0386811660048301527f000000000000000000000000000000000000000000000000000000000000000081166024830152604482018390527f000000000000000000000000000000000000000000000000000000000000000016906323b872dd906064016020604051808303816000875af1158015610832573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108569190610a58565b6108995760405162461bcd60e51b81526020600482015260146024820152731554d110c81d1c985b9cd9995c8819985a5b195960621b60448201526064016102fd565b808260010160008282546108ad9190610a2f565b9091555050600182015482546000916108c591610a03565b90508460028111156108d9576108d9610a42565b6040805184815260208101849052428183015290516001600160a01b038916917f6307847d523c4f1f95b83663c4d3df4f4681a55d9ce8dc188b4372863ebe7fc1919081900360600190a350600195945050505050565b80356001600160a01b038116811461094757600080fd5b919050565b60006020828403121561095e57600080fd5b61096782610930565b9392505050565b80356003811061094757600080fd5b60006020828403121561098f57600080fd5b6109678261096e565b600080604083850312156109ab57600080fd5b50508035926020909101359150565b600080604083850312156109cd57600080fd5b6109d683610930565b91506109e46020840161096e565b90509250929050565b634e487b7160e01b600052601160045260246000fd5b8181038181111561064e5761064e6109ed565b600060208284031215610a2857600080fd5b5051919050565b8082018082111561064e5761064e6109ed565b634e487b7160e01b600052602160045260246000fd5b600060208284031215610a6a57600080fd5b8151801515811461096757600080fdfea26469706673582212203ba8df384fa12e8546f927ada0b473a5834c09c81a5bcae83e9d448a0a2fb46564736f6c63430008170033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100935760003560e01c806385fb94221161006657806385fb94221461015157806389a30271146101ac5780639e2a7bc1146101d3578063d0a605ad146101e6578063fb19db831461020957600080fd5b806343213837146100985780634debb5a8146100da5780635363ae9b146100e457806361d027b314610112575b600080fd5b6100ab6100a636600461094c565b61021c565b6040805195865260208601949094529284019190915260608301521515608082015260a0015b60405180910390f35b6100e26102a8565b005b6101046100f236600461097d565b60006020819052908152604090205481565b6040519081526020016100d1565b6101397f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b0390911681526020016100d1565b61018a61015f36600461094c565b6001602081905260009182526040909120805491810154600282015460039092015490919060ff1684565b60408051948552602085019390935291830152151560608201526080016100d1565b6101397f000000000000000000000000000000000000000000000000000000000000000081565b6100e26101e1366004610998565b61035c565b6101f96101f43660046109ba565b610591565b60405190151581526020016100d1565b6101f96102173660046109ba565b610654565b6001600160a01b038116600090815260016020818152604080842081516080810183528154808252948201549381018490526002820154928101929092526003015460ff16151560608201528392839283928392909161027c8183610a03565b8360400151846060015180156102955750846040015142105b939b929a50909850965090945092505050565b3360009081526001602052604090206003015460ff166103065760405162461bcd60e51b815260206004820152601460248201527327379030b1ba34bb32903832b936b4b9b9b4b7b760611b60448201526064015b60405180910390fd5b3360008181526001602052604090819020600301805460ff19169055517fbd20e616115b933d187c2929d56282e841784672f376eeb58eb7a4f6da3aa524906103529042815260200190565b60405180910390a2565b600082116103ac5760405162461bcd60e51b815260206004820152601f60248201527f5370656e64696e67206c696d6974206d75737420626520706f7369746976650060448201526064016102fd565b600081116103fc5760405162461bcd60e51b815260206004820152601960248201527f4475726174696f6e206d75737420626520706f7369746976650000000000000060448201526064016102fd565b6040516370a0823160e01b815233600482015282907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906370a0823190602401602060405180830381865afa158015610462573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104869190610a16565b10156104d45760405162461bcd60e51b815260206004820152601960248201527f496e73756666696369656e7420555344432062616c616e63650000000000000060448201526064016102fd565b60408051608081018252838152600060208201529081016104f58342610a2f565b8152600160209182018190523360008181528284526040908190208551815593850151928401929092559083015160028301556060909201516003909101805460ff19169115159190911790557f96587ab88ed3ebff489cfa48cc780eaa8e16b96c7f1511fda778c7470eb792468361056e8442610a2f565b604080519283526020830191909152429082015260600160405180910390a25050565b6001600160a01b038216600090815260016020818152604080842081516080810183528154815293810154928401929092526002820154908301526003015460ff161580156060830152806105ea575080604001514210155b156105f957600091505061064e565b600080600085600281111561061057610610610a42565b600281111561062157610621610a42565b815260200190815260200160002054905081600001518183602001516106479190610a2f565b1115925050505b92915050565b6001600160a01b0382166000908152600160205260408120600381015460ff166106b75760405162461bcd60e51b815260206004820152601460248201527327379030b1ba34bb32903832b936b4b9b9b4b7b760611b60448201526064016102fd565b806002015442106106ff5760405162461bcd60e51b815260206004820152601260248201527114195c9b5a5cdcda5bdb88195e1c1a5c995960721b60448201526064016102fd565b600080600085600281111561071657610716610a42565b600281111561072757610727610a42565b8152602001908152602001600020549050816000015481836001015461074d9190610a2f565b111561079b5760405162461bcd60e51b815260206004820152601e60248201527f496e73756666696369656e74207065726d697373696f6e20627564676574000060448201526064016102fd565b6040516323b872dd60e01b81526001600160a01b0386811660048301527f000000000000000000000000000000000000000000000000000000000000000081166024830152604482018390527f000000000000000000000000000000000000000000000000000000000000000016906323b872dd906064016020604051808303816000875af1158015610832573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108569190610a58565b6108995760405162461bcd60e51b81526020600482015260146024820152731554d110c81d1c985b9cd9995c8819985a5b195960621b60448201526064016102fd565b808260010160008282546108ad9190610a2f565b9091555050600182015482546000916108c591610a03565b90508460028111156108d9576108d9610a42565b6040805184815260208101849052428183015290516001600160a01b038916917f6307847d523c4f1f95b83663c4d3df4f4681a55d9ce8dc188b4372863ebe7fc1919081900360600190a350600195945050505050565b80356001600160a01b038116811461094757600080fd5b919050565b60006020828403121561095e57600080fd5b61096782610930565b9392505050565b80356003811061094757600080fd5b60006020828403121561098f57600080fd5b6109678261096e565b600080604083850312156109ab57600080fd5b50508035926020909101359150565b600080604083850312156109cd57600080fd5b6109d683610930565b91506109e46020840161096e565b90509250929050565b634e487b7160e01b600052601160045260246000fd5b8181038181111561064e5761064e6109ed565b600060208284031215610a2857600080fd5b5051919050565b8082018082111561064e5761064e6109ed565b634e487b7160e01b600052602160045260246000fd5b600060208284031215610a6a57600080fd5b8151801515811461096757600080fdfea26469706673582212203ba8df384fa12e8546f927ada0b473a5834c09c81a5bcae83e9d448a0a2fb46564736f6c63430008170033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
